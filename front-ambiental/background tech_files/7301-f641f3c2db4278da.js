!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="91b14248-f462-4d2a-b84e-d36908846b2b",e._sentryDebugIdIdentifier="sentry-dbid-91b14248-f462-4d2a-b84e-d36908846b2b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7301],{80389:function(e,s,t){"use strict";t.d(s,{L:function(){return $}});var l=t(97458),o=t(10893);let n=()=>(0,l.jsx)("div",{className:"h-px w-full bg-surface-border-alpha-2"});var r=t(770),c=t(74447),a=t(57291),i=t(7616),d=t(52983),u=t(94498),x=t(99),m=t(23113),f=t(39246),h=t(9249),v=t(46914),g=t(90368),j=t(87908),p=t(14417),w=t(63918),b=t(3506),C=t(98821),N=t.n(C);let y=e=>{var s;let{isFavourite:t=!1,collection:o,onAddToCollection:n,onRemoveFromCollection:c,collectionIdsLoading:i}=e,u=null!==(s=o.hasResourceInCollection)&&void 0!==s&&s,x=(0,f.a)("smMax"),[m,h]=(0,d.useState)(!1),v=null==i?void 0:i.includes(o.id);return(0,l.jsxs)("button",{className:(0,a.cx)("flex w-full items-center justify-between rounded-lg p-1 hover:bg-surface-2",u?"cursor-default":"cursor-pointer"),onMouseEnter:()=>!x&&h(!0),onMouseLeave:()=>!x&&h(!1),onClick:()=>{u||n(o.id,o.name)},disabled:v,children:[(0,l.jsxs)("div",{className:"flex w-[calc(100%-32px)] items-center gap-2",children:[(0,l.jsx)(z,{preview:o.preview,isFavourite:t,name:o.name}),(0,l.jsx)("span",{className:"max-w-[calc(100%-32px)] truncate text-sm font-semibold text-surface-foreground-2",title:o.name,children:o.name})]}),v?(0,l.jsx)("div",{className:"flex size-8 items-center justify-center",children:(0,l.jsx)(r.J,{as:w.Z,className:"animate-spin text-surface-foreground-1",size:"sm"})}):(0,l.jsx)(L,{isAdded:u,hovered:m,onRemove:()=>{c(o.id)}})]})},z=e=>{let{preview:s,isFavourite:t,name:o}=e,n=(0,f.a)("smMax");return t?(0,l.jsx)("div",{className:"flex size-10 items-center justify-center rounded bg-surface-accent-1 sm:size-8",children:(0,l.jsx)(r.J,{as:g.Z,className:"text-surface-accent-0",size:"sm"})}):s?(0,l.jsx)(N(),{className:"rounded bg-surface-2 object-cover",src:s,alt:o,width:n?40:32,height:n?40:32}):(0,l.jsx)("div",{className:"flex size-10 items-center justify-center rounded bg-surface-2 sm:size-8",children:(0,l.jsx)(r.J,{as:j.Z,className:"text-surface-foreground-3",size:"sm"})})},k=e=>{let{icon:s,onClick:t,label:o}=e;return(0,l.jsxs)("div",{className:"flex size-8 cursor-pointer items-center justify-center rounded transition-opacity",onClick:t,children:[(0,l.jsx)(r.J,{as:s,className:"text-surface-foreground-1",size:"sm"}),(0,l.jsx)(h.T,{children:o})]})},L=e=>{let{isAdded:s,hovered:t,onRemove:n}=e,c=(0,f.a)("smMax"),{t:a}=(0,o.$G)("detailCommon");return(c||t)&&s?(0,l.jsx)(k,{icon:b.Z,onClick:n,label:a("removeFromCollection")}):t?(0,l.jsx)(k,{icon:p.Z,label:a("addToCollection")}):s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.J,{as:v.Z,className:"mr-2 text-surface-foreground-1",size:"sm"}),(0,l.jsx)(h.T,{children:a("addedToCollection")})]})};var M=t(32470),Z=t.n(M);let F=e=>{let{collections:s,onAddToCollection:t,onRemoveFromCollection:o,collectionIdsLoading:r}=e,c=(0,m.a)("mdMax");if(!s||0===s.length)return null;let i=s.find(e=>"Favorites"===e.name),d=s.filter(e=>!e.preview),u=s.filter(e=>"Favorites"!==e.name&&e.preview),x=40*Math.min(s.length,3);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,a.cx)(Z().scrollbar,"overflow-y-auto",c&&"h-[calc(100%-200px)]"),style:{...!c&&{height:"".concat(x,"px")}},children:[i&&(0,l.jsx)(y,{isFavourite:!0,collection:i,onAddToCollection:t,onRemoveFromCollection:o,collectionIdsLoading:r}),[...u,...d].map(e=>(0,l.jsx)(y,{collection:e,onAddToCollection:t,onRemoveFromCollection:o,collectionIdsLoading:r},e.id))]}),(0,l.jsx)(n,{})]})},T=e=>{let{userCollectionsResult:s,onAddToCollection:t,onRemoveFromCollection:n,collectionIdsLoading:m}=e,{t:f}=(0,o.$G)("detailCommon"),[h,v]=(0,d.useState)(""),g=(0,d.useRef)(null),[j,p]=(0,d.useState)(!1),w=(0,i.b9)(u.HQ),b=(0,i.Dv)(u.GD),{data:C}=s,N=C.filter(e=>"owned"===e.ownership).filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));return(0,d.useEffect)(()=>{""===b&&w(s)},[b,w,s]),(0,l.jsxs)(l.Fragment,{children:[!!s.data.length&&(0,l.jsxs)("div",{className:(0,a.cx)("flex cursor-text items-center gap-2 rounded-full border px-3 py-1",j?"border-primary-0":"border-surface-border-alpha-2"),onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},"data-cy":"collection-popover-search",children:[(0,l.jsx)(r.J,{as:c.Z,className:"text-surface-foreground-3",size:"sm"}),(0,l.jsx)("input",{value:h,onChange:e=>v(e.target.value),placeholder:f("detailCommon:searchCollections"),className:"w-full border-transparent bg-surface-0 text-xs font-normal text-surface-foreground-3 focus:outline-none dark:bg-surface-2",onFocus:()=>p(!0),onBlur:()=>p(!1),ref:g})]}),(0,l.jsx)("span",{className:"text-xs text-surface-foreground-3",children:f("selectACollection")}),(0,l.jsx)(F,{collections:N.map(x.V),onAddToCollection:t,onRemoveFromCollection:n,collectionIdsLoading:m})]})},_=e=>{let{onAddToCollection:s,onRemoveFromCollection:t,collectionIdsLoading:o,responseCollections:n}=e;return n?(0,l.jsx)(T,{userCollectionsResult:n,onAddToCollection:s,onRemoveFromCollection:t,collectionIdsLoading:o}):null};var I=t(39597),R=t(96065);let H=e=>{let{asType:s,icon:t,label:o,dataCy:n,rightElement:c,...a}=e;return(0,l.jsxs)(null!=s?s:"button",{className:"group my-0.5 flex min-h-10 w-full items-center justify-between rounded-lg bg-surface-0 px-2 hover:bg-ghost-1 dark:bg-surface-2",...a,"data-cy":n,children:[(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.J,{as:t,size:"sm",className:"text-surface-foreground-0"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-surface-foreground-2",children:o})]}),c]})},J=e=>{let{onCreateCollection:s}=e,[t,n]=(0,d.useState)(""),[r,c]=(0,d.useState)(!1),{t:a}=(0,o.$G)("detailCommon"),i=(0,d.useRef)(null),u=()=>{s(t),n(""),c(!1)};return((0,d.useEffect)(()=>{if(r){var e;null===(e=i.current)||void 0===e||e.focus()}},[r]),r)?(0,l.jsxs)("div",{className:"my-0.5 flex min-h-10 items-center gap-1",children:[(0,l.jsx)(I.I,{type:"text",className:"h-8 w-full sm:w-[152px]",placeholder:a("name"),value:t,onChange:e=>{n(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&u()},ref:i}),(0,l.jsx)(A,{onClick:u,disabled:!t,icon:v.Z}),(0,l.jsx)(A,{onClick:()=>c(!1),icon:R.Z})]}):(0,l.jsx)(H,{onClick:()=>c(!0),icon:p.Z,label:a("newCollection"),dataCy:"collection-popover-create"})},A=e=>{let{onClick:s,disabled:t,icon:o}=e;return(0,l.jsx)("button",{className:"size-8 min-w-8 rounded-sm hover:bg-surface-2",onClick:s,disabled:t,children:(0,l.jsx)(r.J,{as:o,size:"sm",className:"text-surface-foreground-0"})})};var E=t(25983),V=t(30898),B=t(80712),D=t(11632),G=t.n(D);let S=()=>{let{t:e}=(0,o.$G)("detailCommon"),s=(0,E.$T)("/user/collections");return(0,l.jsx)(H,{asType:G(),href:"".concat(s,"?from_element=collections_popover"),icon:B.Z,label:e("goToAllCollections"),dataCy:"collection-popover-go-to-all",rightElement:(0,l.jsx)("span",{className:"hidden items-center md:group-hover:flex",children:(0,l.jsx)(r.J,{as:V.Z,size:"base",className:"text-surface-foreground-0"})})})},$=e=>{let{onAddToCollection:s,onRemoveFromCollection:t,onCreateCollection:r,collectionIdsLoading:c,responseCollections:a}=e,{t:i}=(0,o.$G)("detailCommon");return(0,l.jsxs)("div",{className:"flex size-full flex-col justify-between bg-surface-0 p-4 xs:justify-start sm:h-auto sm:w-64 sm:rounded-lg sm:shadow-xs dark:bg-surface-2",children:[(0,l.jsxs)("div",{className:"flex h-full flex-col gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-surface-foreground-2",children:i("saveToCollection")}),(0,l.jsx)(_,{onAddToCollection:s,onRemoveFromCollection:t,collectionIdsLoading:c,responseCollections:a})]}),(0,l.jsxs)("div",{className:"fixed bottom-0 w-[calc(100%-34px)] sm:relative sm:w-auto sm:p-0",children:[(0,l.jsx)(J,{onCreateCollection:r}),(0,l.jsx)(n,{}),(0,l.jsx)(S,{})]})]})}},89310:function(e,s,t){"use strict";t.d(s,{B:function(){return o}});var l=t(63202);let o=e=>{let{name:s,description:t,type:o}=e;return(0,l.c)("/api/user/collections","POST",{name:s,...t&&{description:t},...o&&{type:o}})}},30898:function(e,s,t){"use strict";var l=t(97458);s.Z=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24","aria-hidden":!0,...e,children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M7.65 7.031a1.172 1.172 0 1 1 0-2.343h10.49c.648 0 1.172.524 1.172 1.171V16.35a1.172 1.172 0 0 1-2.343 0V8.689L6.688 18.969a1.172 1.172 0 0 1-1.657-1.657l10.28-10.28z",clipRule:"evenodd"})})},90368:function(e,s,t){"use strict";var l=t(97458);s.Z=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,l.jsx)("path",{d:"M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"})})},87908:function(e,s,t){"use strict";var l=t(97458);s.Z=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,l.jsx)("path",{d:"M448.9 24.4H189c-34.8 0-63.1 28.3-63.1 63.1v201.8c0 34.8 28.3 63.1 63.1 63.1h259.8c34.8 0 63.1-28.3 63.1-63.1V87.4c.1-34.7-28.2-63-63-63M189 74.4h259.8c7.2 0 13.1 5.9 13.1 13.1v170.1l-30.6-31c-4.7-4.8-11.1-7.4-17.8-7.4s-13.1 2.7-17.8 7.5l-23 23.5-90-90.3c-4.7-4.7-11.1-7.4-17.7-7.4s-13 2.6-17.7 7.3L176 231.2V87.4c0-7.2 5.8-13 13-13"}),(0,l.jsx)("path",{d:"M388 172.7c15.8 0 28.6-12.8 28.6-28.6s-12.8-28.6-28.6-28.6-28.6 12.8-28.6 28.6 12.8 28.6 28.6 28.6M326.3 428.1c-2 7-9.2 11-16.2 9.1L59.6 366.9c-3.4-.9-6.2-3.1-7.9-6.2s-2.1-6.6-1.2-10L76 260.1V112.5c-8.8 7.8-15.6 18.1-19 30.3L2.4 337.3c-4.5 16.2-2.5 33.3 5.8 48s21.8 25.3 38 29.8l250.5 70.2c5.7 1.6 11.4 2.3 17 2.3 27.6 0 53-18.3 60.8-46.1l11-39.2h-51.9z"})]})},14417:function(e,s,t){"use strict";var l=t(97458);s.Z=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,l.jsx)("path",{d:"M413 372H232V191c0-13.807-11.193-25-25-25s-25 11.193-25 25v181H1c-13.807 0-25 11.193-25 25s11.193 25 25 25h181v181c0 13.807 11.193 25 25 25s25-11.193 25-25V422h181c13.807 0 25-11.193 25-25s-11.193-25-25-25"})})},3506:function(e,s,t){"use strict";var l=t(97458);s.Z=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,l.jsx)("path",{d:"M428 231.5H317v-65c0-13.807-11.193-25-25-25H122c-13.807 0-25 11.193-25 25v65H-14c-13.807 0-25 11.193-25 25s11.193 25 25 25h25v306c0 35.841 29.159 65 65 65h262c35.841 0 65-29.159 65-65v-306h25c13.807 0 25-11.193 25-25s-11.193-25-25-25m-281-40h120v40H147zm206 396c0 8.271-6.729 15-15 15H76c-8.271 0-15-6.729-15-15v-306h292z"}),(0,l.jsx)("path",{d:"M150 341.5c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25m114 0c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25"})]})},32470:function(e){e.exports={scrollbar:"listCollections_scrollbar__CCWxo"}}}]);