!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="70faf0e5-ec7d-42eb-a83c-8a527f857266",e._sentryDebugIdIdentifier="sentry-dbid-70faf0e5-ec7d-42eb-a83c-8a527f857266")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7467],{84559:function(e,t,r){var s=r(97458);t.Z=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"M255.887 438.4c-100.6 0-182.4-81.8-182.4-182.4s81.8-182.4 182.4-182.4c61.1 0 117.9 30.4 151.8 81.3 7.7 11.5 4.6 27-6.9 34.7s-27 4.6-34.7-6.9c-24.6-37-65.9-59.1-110.2-59.1-73 0-132.4 59.4-132.4 132.4s59.4 132.4 132.4 132.4c44.4 0 85.6-22.1 110.2-59.1 7.7-11.5 23.2-14.6 34.7-6.9s14.6 23.2 6.9 34.7c-33.9 50.9-90.7 81.3-151.8 81.3"})})},60702:function(e,t,r){var s=r(97458);t.Z=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"M501.1 368.7 317.6 57.8c-.1-.1-.1-.2-.2-.3C304.2 35.9 281.3 23 256 23s-48.2 12.9-61.4 34.4c-.1.1-.1.2-.2.3l-183.5 311c-13.7 22.5-14.2 49.6-1.3 72.6s36.4 36.8 62.8 36.8h367.2c26.4 0 49.9-13.8 62.8-36.8s12.4-50.1-1.3-72.6M231 173c0-13.8 11.2-25 25-25s25 11.2 25 25v124.4c0 13.8-11.2 25-25 25s-25-11.2-25-25zm25 242.4c-17 0-30.8-13.8-30.8-30.8s13.8-30.8 30.8-30.8 30.8 13.8 30.8 30.8-13.8 30.8-30.8 30.8"})})},19077:function(e,t,r){r.d(t,{R:function(){return l},J:function(){return ei}});var s=r(97458),n=r(57291);let a="project_default",o=["linear-gradient(45deg, #FF9E90, #6C2F8D)","linear-gradient(135deg, #B07CC6, #1E5A38)","linear-gradient(225deg, #6569BD, #07544F)","linear-gradient(90deg, #44B678, #CC5A4A)","linear-gradient(180deg, #15BCB2, #2E3173)","linear-gradient(60deg, #FF9E90, #2E3173)","linear-gradient(120deg, #B07CC6, #07544F)","linear-gradient(200deg, #6569BD, #1E5A38)","linear-gradient(30deg, #44B678, #6C2F8D)","linear-gradient(150deg, #15BCB2, #CC5A4A)","linear-gradient(75deg, #FF9E90, #1E5A38)","linear-gradient(195deg, #B07CC6, #CC5A4A)","linear-gradient(255deg, #6569BD, #6C2F8D)","linear-gradient(315deg, #44B678, #2E3173)","linear-gradient(105deg, #15BCB2, #8D63A0)","linear-gradient(165deg, #FF9E90, #07544F)","linear-gradient(285deg, #B07CC6, #368F60)","linear-gradient(345deg, #6569BD, #CC7E73)","linear-gradient(210deg, #44B678, #6C2F8D)","linear-gradient(30deg, #15BCB2, #2E3173)","linear-gradient(15deg, #FF9E90, #44B678)","linear-gradient(75deg, #B07CC6, #15BCB2)","linear-gradient(135deg, #6569BD, #CC5A4A)","linear-gradient(195deg, #44B678, #6C2F8D)","linear-gradient(255deg, #15BCB2, #8D63A0)","linear-gradient(315deg, #FF9E90, #2E3173)","linear-gradient(105deg, #B07CC6, #368F60)","linear-gradient(165deg, #6569BD, #CC7E73)","linear-gradient(225deg, #44B678, #07544F)","linear-gradient(285deg, #15BCB2, #6C2F8D)"],c=(e,t)=>{if(e===a)return"linear-gradient(135deg, #fb923c, #facc15, #f472b6)";let r=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)}(t)%o.length;return o[r]},l=e=>{let{project:t,className:r,children:a}=e,{type:o,reference:l}=t,i=c(o,l);return(0,s.jsx)("span",{className:(0,n.cx)("flex size-4 items-center justify-center rounded-sm bg-gradient-to-b text-xs font-semibold uppercase leading-none text-white",r),style:{background:i},children:a})};var i=r(72234),u=r(52983),d=r(66827),f=r(48681),m=r(25350),p=r(39597),g=r(10893),x=r(25983),h=r(8314),j=r(82206),b=r(1850);let v=b.z.object({reference:b.z.string(),name:b.z.string(),type:b.z.string(),isPinned:b.z.boolean(),shared:b.z.boolean(),sharedWithMe:b.z.boolean()}),y=async e=>{let{name:t,description:r,locale:s}=e;return fetch("/api/user/projects",{method:"POST",body:JSON.stringify({name:t,description:r,locale:s})}).then(async e=>{if(e.ok){let t=await e.json();return{success:!0,data:v.parse(t)}}return{success:!1,status:e.status}})},w=e=>{let{onOpenChange:t}=e,{t:r}=(0,g.$G)(["error","topNav"]),[s,n]=(0,u.useState)(!1),[a,o]=(0,u.useState)({name:"",description:""}),c=(0,x.ZK)(),{openToast:l}=(0,h.x_)(),{switchToProject:i}=(0,j.Z)(),d=e=>{t(e),e||o({name:"",description:""})},f=async e=>{if(e.preventDefault(),a.name.trim())try{n(!0);let e=await y({name:a.name,description:a.description,locale:c});e.success?(i(e.data.reference),d(!1),l({type:"success",message:r("topNav:projectsSubmenu.create.successMessage")}),window.location.href="/pikaso/projects/history"):l({type:"danger",message:r("error:unknown")})}catch(e){l({type:"danger",message:r("error:unknown")})}finally{n(!1)}},m=a.name.trim().length<1;return{formData:a,handleInputChange:e=>t=>{o(r=>({...r,[e]:t.target.value}))},handleSubmit:f,isSubmitDisabled:m,isSaving:s,handleOpenChange:d}},C=e=>{let{isOpen:t,onOpenChange:r}=e,{t:n}=(0,g.$G)("topNav"),{formData:a,handleInputChange:o,handleSubmit:c,isSubmitDisabled:l,isSaving:i,handleOpenChange:u}=w({onOpenChange:r});return(0,s.jsxs)(f.u,{open:t,onOpenChange:u,children:[(0,s.jsx)("h2",{className:"mb-1 text-xl font-semibold text-surface-foreground-0",children:n("projectsSubmenu.create.title")}),(0,s.jsx)("p",{className:"mb-5 text-base text-surface-foreground-4",children:n("projectsSubmenu.create.description")}),(0,s.jsxs)("form",{onSubmit:c,className:"mt-5 flex flex-col gap-6 text-surface-foreground-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:n("projectsSubmenu.create.projectName")}),(0,s.jsx)(p.I,{value:a.name,onChange:o("name"),type:"text",autoFocus:!0,placeholder:n("projectsSubmenu.create.projectNamePlaceholder"),className:"w-full rounded border border-form-border-0 bg-form-0 px-3 py-2 text-sm text-form-foreground-1"})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(d.x8,{asChild:!0,children:(0,s.jsx)(m.z,{variant:"outline",children:n("projectsSubmenu.create.cancel")})}),(0,s.jsx)(m.z,{variant:"primary",type:"submit",disabled:l||i,children:n("projectsSubmenu.create.create")})]})]})]})};var N=r(26981);let S=e=>{let{isOpen:t,onOpenChange:r}=e,{t:n}=(0,g.$G)("topNav"),a=(0,N.$)("/pricing"),o="".concat(a,"?origin=").concat("freepik_web");return(0,s.jsx)(f.u,{size:"lg",contentClassName:"p-0 sm:max-h-[650px] max-h-full h-auto sm:h-full",open:t,onOpenChange:r,children:(0,s.jsxs)("div",{className:"flex size-full max-w-5xl ",children:[(0,s.jsx)("div",{className:"hidden h-full w-1/2 shrink-0 sm:flex",children:(0,s.jsx)("img",{src:"https://pikaso.cdnpk.net/public/media/limit-reached.jpg",alt:"Upgrade",className:"size-full rounded-t-lg object-cover md:rounded-l-lg md:rounded-tr-none"})}),(0,s.jsxs)("div",{className:"flex size-full flex-col justify-center gap-6 rounded-b-lg p-8 sm:w-1/2 md:rounded-r-lg md:rounded-bl-none",children:[(0,s.jsx)("h2",{className:"text-2xl font-medium leading-tight text-surface-foreground-0 lg:text-5xl",children:n("projectsSubmenu.goPremium.title")}),(0,s.jsx)("p",{className:"mb-3 text-base text-surface-foreground-4",children:(0,s.jsx)(g.cC,{i18nKey:"projectsSubmenu.goPremium.description",t:n,components:{b:(0,s.jsx)("b",{className:"font-semibold"})}})}),(0,s.jsx)("p",{className:"text-base text-surface-foreground-4",children:n("projectsSubmenu.goPremium.extra")}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(m.z,{variant:"premium",className:"w-full font-semibold",onClick:()=>window.location.href=o,children:n("projectsSubmenu.goPremium.upgrade")}),(0,s.jsx)(d.x8,{asChild:!0,children:(0,s.jsx)(m.z,{variant:"ghost",className:"w-full text-base",children:n("projectsSubmenu.goPremium.cancel")})})]})]})]})})};var k=r(92699),F=r(770),z=r(84559),E=r(82636),B=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"M307 372h-75v-75c0-13.807-11.193-25-25-25s-25 11.193-25 25v75h-75c-13.807 0-25 11.193-25 25s11.193 25 25 25h75v75c0 13.807 11.193 25 25 25s25-11.193 25-25v-75h75c13.807 0 25-11.193 25-25s-11.193-25-25-25"})}),P=r(47092),D=r(63822),I=r(90726),T=r(3506),A=r(44253),R=r(95678),Z=r(39246),_=r(60702);let M=async e=>{let{locale:t,reference:r}=e;return fetch("/api/user/projects/".concat(r),{method:"DELETE",headers:{"Accept-Language":t}}).then(async e=>e.ok?{success:!0}:{success:!1,status:e.status})},G="delete",O=e=>{let{onOpenChange:t,project:r,onSave:s}=e,{t:n}=(0,g.$G)(["error","topNav"]),[a,o]=(0,u.useState)(!1),[c,l]=(0,u.useState)({confirmationText:""}),i=(0,x.ZK)(),{openToast:d}=(0,h.x_)(),f=e=>{t(e),e||l({confirmationText:""})},m=async e=>{if(e.preventDefault(),c.confirmationText.toLowerCase()===G)try{o(!0),(await M({locale:i,reference:r.reference})).success?(f(!1),s(),d({type:"success",message:n("topNav:projectsSubmenu.deleteProject.successMessage")})):d({type:"danger",message:n("error:unknown")})}catch(e){d({type:"danger",message:n("error:unknown")})}finally{o(!1)}},p=c.confirmationText.toLowerCase()!==G;return{formData:c,handleInputChange:e=>t=>{l(r=>({...r,[e]:t.target.value}))},handleSubmit:m,isSubmitDisabled:p,isSaving:a,handleOpenChange:f}},J=e=>{let{isOpen:t,onOpenChange:r,onSave:n,project:a}=e,{t:o}=(0,g.$G)("topNav",{keyPrefix:"projectsSubmenu.deleteProject"}),{handleInputChange:c,handleSubmit:l,isSubmitDisabled:i,isSaving:x,handleOpenChange:h}=O({onOpenChange:r,onSave:n,project:a}),j=(0,u.useRef)(null);return(0,u.useEffect)(()=>{t&&setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100)},[t]),(0,s.jsxs)(f.u,{open:t,onOpenChange:h,children:[(0,s.jsxs)("h2",{className:"mb-1 flex items-center gap-2 text-xl font-semibold text-surface-foreground-0",children:[(0,s.jsx)(m.z,{asChild:!0,variant:"destructive",className:"size-8 rounded-full p-0 hover:bg-destructive-0",children:(0,s.jsx)("div",{children:(0,s.jsx)(F.J,{as:_.Z,className:"size-3.5"})})}),o("title")]}),(0,s.jsx)("p",{className:"my-4 text-base text-surface-foreground-4",children:o("description")}),(0,s.jsxs)("form",{onSubmit:l,className:"mt-5 flex flex-col gap-6 text-surface-foreground-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)("p",{className:"mb-2 text-base text-surface-foreground-4",children:o("confirmDescription")}),(0,s.jsx)(p.I,{onChange:c("confirmationText"),type:"text",ref:j,autoFocus:!0,placeholder:"Type 'delete' to confirm",className:"w-full rounded border border-form-border-0 bg-form-0 px-3 py-2 text-sm text-form-foreground-1"})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(d.x8,{asChild:!0,children:(0,s.jsx)(m.z,{variant:"outline",children:o("cancel")})}),(0,s.jsx)(m.z,{variant:"destructive",type:"submit",disabled:i||x,children:o("confirm")})]})]})]})},$=async e=>{let{name:t,locale:r,reference:s}=e;return fetch("/api/user/projects/".concat(s),{method:"PUT",body:JSON.stringify({name:t,locale:r})}).then(async e=>e.ok?{success:!0}:{success:!1,status:e.status})},L=e=>{let{onOpenChange:t,project:r,onSave:s}=e,{t:n}=(0,g.$G)(["error","topNav"]),[a,o]=(0,u.useState)(!1),[c,l]=(0,u.useState)({name:r.name}),i=(0,x.ZK)(),{openToast:d}=(0,h.x_)(),f=e=>{t(e),e||l({name:r.name})},m=async e=>{if(e.preventDefault(),c.name.trim())try{o(!0),(await $({name:c.name,locale:i,reference:r.reference})).success?(f(!1),s({...r,name:c.name}),d({type:"success",message:n("topNav:projectsSubmenu.projectSettings.successMessage")})):d({type:"danger",message:n("error:unknown")})}catch(e){d({type:"danger",message:n("error:unknown")})}finally{o(!1)}},p=c.name.trim().length<1;return{formData:c,handleInputChange:e=>t=>{l(r=>({...r,[e]:t.target.value}))},handleSubmit:m,isSubmitDisabled:p,isSaving:a,handleOpenChange:f}},K=e=>{let{isOpen:t,onOpenChange:r,onSave:n,project:a}=e,{t:o}=(0,g.$G)("topNav",{keyPrefix:"projectsSubmenu.projectSettings"}),{formData:c,handleInputChange:l,handleSubmit:i,isSubmitDisabled:x,isSaving:h,handleOpenChange:j}=L({onOpenChange:r,onSave:n,project:a}),b=(0,u.useRef)(null);return(0,u.useEffect)(()=>{t&&setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()},100)},[t]),(0,s.jsxs)(f.u,{open:t,onOpenChange:j,children:[(0,s.jsx)("h2",{className:"mb-1 text-xl font-semibold text-surface-foreground-0",children:o("title")}),(0,s.jsx)("p",{className:"mb-5 text-base text-surface-foreground-4",children:o("description")}),(0,s.jsxs)("form",{onSubmit:i,className:"mt-5 flex flex-col gap-6 text-surface-foreground-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:o("projectName")}),(0,s.jsx)(p.I,{value:c.name,onChange:l("name"),type:"text",ref:b,autoFocus:!0,placeholder:o("projectNamePlaceholder"),className:"w-full rounded border border-form-border-0 bg-form-0 px-3 py-2 text-sm text-form-foreground-1"})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(d.x8,{asChild:!0,children:(0,s.jsx)(m.z,{variant:"outline",children:o("cancel")})}),(0,s.jsx)(m.z,{variant:"primary",type:"submit",disabled:x||h,children:o("save")})]})]})]})},U=e=>{let{project:t,switchToProject:r,togglePinned:o,deleteProject:c,updateProject:i}=e,{name:d,type:f,isPinned:p,sharedWithMe:x,shared:h}=t,{t:b}=(0,g.$G)("topNav",{keyPrefix:"projectsSubmenu"}),[v,y]=(0,u.useState)(!1),[w,C]=(0,u.useState)(!1),N=(0,Z.a)("sm"),{currentProject:S}=(0,j.Z)(),k=async()=>{await r()},z=async e=>{e.stopPropagation(),await o()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.z,{variant:"ghost",asChild:!0,className:(0,n.cx)("group flex h-8 w-full justify-start gap-1 p-1 font-normal hover:bg-surface-2 sm:h-6",(null==S?void 0:S.reference)===t.reference&&"bg-surface-2"),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:k,className:"flex min-w-0 grow items-center gap-2 p-0 text-ghost-foreground-0",children:[(0,s.jsx)(l,{project:t,className:"shrink-0"}),(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[(0,s.jsx)("span",{className:"truncate",children:d}),(x||h)&&(0,s.jsx)(F.J,{as:R.Z,className:"size-3 shrink-0 text-surface-foreground-3"})]})]}),f!==a&&(0,s.jsxs)(s.Fragment,{children:[!x&&(0,s.jsxs)(P.fC,{children:[(0,s.jsx)(P.xz,{asChild:!0,children:(0,s.jsx)(H,{})}),(0,s.jsxs)(P.VY,{className:"absolute right-0 mt-0 flex w-32 flex-col gap-1 rounded-lg border border-surface-border-alpha-0 bg-surface-0 p-2 shadow-lg sm:right-auto sm:-mt-1 sm:ml-5 dark:bg-surface-1 ",side:N?"top":"bottom",align:N?"start":"end",children:[(0,s.jsx)(W,{icon:I.Z,onClick:()=>{y(!0)},children:b("settings")}),(0,s.jsx)(W,{icon:p?A.Z:D.Z,onClick:z,children:b(p?"unpin":"pin")}),(0,s.jsx)(W,{icon:T.Z,onClick:()=>{C(!0)},variant:"destructive",children:b("delete")})]})]}),(0,s.jsx)(m.z,{variant:"ghost",className:(0,n.cx)("ml-auto aspect-square h-full p-0 opacity-0 transition-opacity group-hover:opacity-100",p?"flex opacity-100":"flex"),onClick:z,children:(0,s.jsx)(F.J,{className:"size-3",as:p?A.Z:D.Z})})]})]})}),(0,s.jsx)(K,{isOpen:v,onOpenChange:e=>{y(e)},project:t,onSave:e=>{y(!1),i(e)}}),(0,s.jsx)(J,{isOpen:w,onOpenChange:e=>{C(e)},project:t,onSave:()=>{C(!1),c()}})]})},H=(0,u.forwardRef)((e,t)=>(0,s.jsx)(m.z,{...e,ref:t,variant:"ghost",size:"sm",className:"flex aspect-square h-full rounded-sm p-0 opacity-0 transition-opacity group-hover:opacity-100 data-[state=open]:opacity-100",children:(0,s.jsx)(F.J,{as:E.Z,className:"size-3"})}));H.displayName="MenuTriggerButton";let W=e=>{let{children:t,icon:r,onClick:a,variant:o="default"}=e;return(0,s.jsx)(P.ck,{asChild:!0,children:(0,s.jsxs)(m.z,{variant:"ghost",onClick:a,className:(0,n.cx)("h-auto justify-start px-1 py-0 text-sm font-normal","destructive"===o&&"text-destructive-foreground-0 dark:text-destructive-0"),children:[(0,s.jsx)(F.J,{as:r,className:"size-3.5"}),t]})})};var V=r(74447);let q=e=>{let{searchQuery:t,searchProjects:r}=e,[n,a]=(0,u.useState)(t),o=(0,u.useRef)(""),{t:c}=(0,g.$G)("topNav");return(0,u.useEffect)(()=>{let e=setTimeout(()=>{t!==n&&(r(n),o.current=n)},300);return()=>clearTimeout(e)},[n,r,t]),(0,s.jsx)("div",{className:"hidden p-4 sm:flex",children:(0,s.jsxs)("div",{className:"flex h-8 w-full items-center gap-3 rounded border border-surface-border-alpha-1 bg-form-0 px-3 text-surface-foreground-0 dark:bg-surface-1",children:[(0,s.jsx)(F.J,{as:V.Z,className:"size-3.5"}),(0,s.jsx)("input",{className:"flex size-full w-full items-center bg-transparent px-0 text-sm text-surface-foreground-0 placeholder:text-surface-foreground-4 focus:outline-none",placeholder:c("projectsSubmenu.searchProjects"),value:n,onChange:e=>{a(e.target.value)},autoFocus:!0})]})})};var Q=r(11645);let Y=b.z.object({projects:b.z.array(v),meta:b.z.object({pagination:b.z.object({total:b.z.number()})})}).transform(e=>{let{meta:t,...r}=e;return{...r,total:t.pagination.total}}),X=async e=>{let{locale:t,query:r}=e,s=new Headers;t&&s.set("accept-language",t);let n=new URLSearchParams({perPage:"".concat(5),locale:t,...r&&{name:r}});return fetch("/api/user/projects?".concat(n.toString()),{headers:s}).then(async e=>{if(e.ok){let t=await e.json();return{success:!0,data:Y.parse(t)}}return{success:!1,status:e.status}})},ee=()=>{let{selectCurrentProject:e,projects:t,togglePinnedProject:r,refreshDefaultData:s}=(0,j.Z)(),[n,a]=(0,u.useState)(null),[o,c]=(0,u.useState)(!1),[l,i]=(0,u.useState)(""),d=(0,x.ZK)();(0,u.useEffect)(()=>{""===l&&a(t)},[t,l]);let f=(0,u.useCallback)(async t=>{try{await e(t)}catch(e){console.error("Error switching project:",e)}},[e]),m=(0,u.useCallback)(async e=>{if(i(e),""===e){a(t);return}c(!0);try{let r=await X({locale:d,query:e});if(!r.success){a(t);return}a(r.data.projects)}catch(e){console.error("Error searching projects:",e),a(t)}finally{c(!1)}},[d,t]),p=(0,u.useCallback)(async e=>{try{a(t=>et(t,e)),await r(e),""===l&&a(t)}catch(t){console.error("Error pinning/unpinning project:",t),a(t=>et(t,e))}},[r,l,t]);return{projects:n,isSearching:o,searchQuery:l,searchProjects:m,switchToProject:f,togglePinned:p,deleteProject:(0,u.useCallback)(async e=>{a(t=>es(t,e)),await s()},[s]),updateProject:(0,u.useCallback)(async e=>{a(t=>er(t,e)),await s()},[s]),canCreateProject:(0,Q.u)()("projects-create")}},et=(e,t)=>e?e.map(e=>e.reference===t?{...e,isPinned:!e.isPinned}:e):[],er=(e,t)=>e?e.map(e=>e.reference===t.reference?t:e):[],es=(e,t)=>e?e.filter(e=>e.reference!==t):[],en=e=>{let{onSwitchProject:t,onCreateProject:r}=e,{isSearching:n,projects:a,searchQuery:o,searchProjects:c,switchToProject:l,togglePinned:i,deleteProject:u,updateProject:d,canCreateProject:f}=ee();if(!a)return null;let m=async e=>{await l(e),t()},p=async e=>{await u(e)},g=async e=>{await d(e)};return(0,s.jsxs)("div",{className:"divide-y divide-surface-border-alpha-0",children:[(0,s.jsx)(q,{searchQuery:o,searchProjects:c}),(0,s.jsx)("div",{className:"flex flex-col gap-1 p-4 sm:px-4 sm:py-2",children:n?(0,s.jsx)(ea,{}):(0,s.jsxs)(s.Fragment,{children:[0===a.length&&(0,s.jsx)(eo,{searchQuery:o}),a.map(e=>(0,s.jsx)(U,{project:e,switchToProject:()=>m(e.reference),togglePinned:()=>i(e.reference),deleteProject:()=>p(e.reference),updateProject:e=>g(e)},e.reference)),(0,s.jsx)(ec,{})]})}),f&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(el,{onClick:r})})]})},ea=()=>(0,s.jsx)("div",{className:"flex h-12 w-full items-center justify-center",children:(0,s.jsx)(F.J,{as:z.Z,className:"animate-spin text-2xl text-surface-foreground-4"})}),eo=e=>{let{searchQuery:t}=e,{t:r}=(0,g.$G)("topNav");return(0,s.jsx)("p",{className:"pb-3 text-sm leading-relaxed text-surface-foreground-3",children:r("projectsSubmenu.noResults",{searchQuery:t})})},ec=()=>{let{t:e}=(0,g.$G)("topNav"),t=(0,k.L)();return(0,s.jsx)(m.z,{asChild:!0,variant:"ghost",className:"h-8 justify-start gap-2 p-1 font-normal sm:h-6",children:(0,s.jsxs)("a",{href:t("/pikaso/projects/all"),children:[(0,s.jsx)("div",{className:"flex size-4 items-center justify-center",children:(0,s.jsx)(F.J,{as:E.Z,className:"size-3.5"})}),e("projectsSubmenu.allProjects")]})})},el=e=>{let{onClick:t}=e,{t:r}=(0,g.$G)("topNav");return(0,s.jsxs)(m.z,{variant:"ghost",className:"group h-6 w-full justify-start gap-2.5 p-0 font-normal",onClick:t,children:[(0,s.jsx)(m.z,{variant:"tertiary",className:"size-6 p-0",asChild:!0,children:(0,s.jsx)("span",{children:(0,s.jsx)(F.J,{as:B,className:"size-3.5"})})}),r("projectsSubmenu.newProject")]})},ei=e=>{var t,r;let{onSwitchProject:n}=e,a=(0,i.HI)(),[o,c]=(0,u.useState)(!1),[l,d]=(0,u.useState)(!1),f=null!==(r=null==a?void 0:null===(t=a.permissions)||void 0===t?void 0:t.canUseProjects)&&void 0!==r&&r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en,{onSwitchProject:n,onCreateProject:()=>{f?c(!0):d(!0)}}),(0,s.jsx)(C,{isOpen:o,onOpenChange:e=>c(e)}),(0,s.jsx)(S,{isOpen:l,onOpenChange:e=>d(e)})]})}},11645:function(e,t,r){r.d(t,{u:function(){return a}});var s=r(52983),n=r(8147);let a=()=>{let e=(0,n.H)();return(0,s.useCallback)(t=>{if(!e)return!0;try{let r=e.disabledPermissionsTools;if(!r)return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:"Disabled permissions tools not found"})),!0;return!(t in r)}catch(r){return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:r})),!0}},[e])}},57164:function(e,t,r){r.d(t,{gm:function(){return a}});var s=r(52983);let n=(0,s.createContext)(void 0);function a(e){let t=(0,s.useContext)(n);return e||t||"ltr"}},22092:function(e,t,r){r.d(t,{Pc:function(){return y},ck:function(){return B},fC:function(){return E}});var s=r(13491),n=r(52983),a=r(12527),o=r(88957),c=r(81213),l=r(62331),i=r(74009),u=r(37956),d=r(91109),f=r(23196),m=r(57164);let p="rovingFocusGroup.onEntryFocus",g={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[h,j,b]=(0,o.B)(x),[v,y]=(0,l.b)(x,[b]),[w,C]=v(x),N=(0,n.forwardRef)((e,t)=>(0,n.createElement)(h.Provider,{scope:e.__scopeRovingFocusGroup},(0,n.createElement)(h.Slot,{scope:e.__scopeRovingFocusGroup},(0,n.createElement)(S,(0,s.Z)({},e,{ref:t}))))),S=(0,n.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:o,loop:l=!1,dir:i,currentTabStopId:x,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:b,onEntryFocus:v,...y}=e,C=(0,n.useRef)(null),N=(0,c.e)(t,C),S=(0,m.gm)(i),[k=null,F]=(0,f.T)({prop:x,defaultProp:h,onChange:b}),[E,B]=(0,n.useState)(!1),P=(0,d.W)(v),D=j(r),I=(0,n.useRef)(!1),[T,A]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=C.current;if(e)return e.addEventListener(p,P),()=>e.removeEventListener(p,P)},[P]),(0,n.createElement)(w,{scope:r,orientation:o,dir:S,loop:l,currentTabStopId:k,onItemFocus:(0,n.useCallback)(e=>F(e),[F]),onItemShiftTab:(0,n.useCallback)(()=>B(!0),[]),onFocusableItemAdd:(0,n.useCallback)(()=>A(e=>e+1),[]),onFocusableItemRemove:(0,n.useCallback)(()=>A(e=>e-1),[])},(0,n.createElement)(u.WV.div,(0,s.Z)({tabIndex:E||0===T?-1:0,"data-orientation":o},y,{ref:N,style:{outline:"none",...e.style},onMouseDown:(0,a.M)(e.onMouseDown,()=>{I.current=!0}),onFocus:(0,a.M)(e.onFocus,e=>{let t=!I.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(p,g);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=D().filter(e=>e.focusable);z([e.find(e=>e.active),e.find(e=>e.id===k),...e].filter(Boolean).map(e=>e.ref.current))}}I.current=!1}),onBlur:(0,a.M)(e.onBlur,()=>B(!1))})))}),k=(0,n.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:o=!0,active:c=!1,tabStopId:l,...d}=e,f=(0,i.M)(),m=l||f,p=C("RovingFocusGroupItem",r),g=p.currentTabStopId===m,x=j(r),{onFocusableItemAdd:b,onFocusableItemRemove:v}=p;return(0,n.useEffect)(()=>{if(o)return b(),()=>v()},[o,b,v]),(0,n.createElement)(h.ItemSlot,{scope:r,id:m,focusable:o,active:c},(0,n.createElement)(u.WV.span,(0,s.Z)({tabIndex:g?0:-1,"data-orientation":p.orientation},d,{ref:t,onMouseDown:(0,a.M)(e.onMouseDown,e=>{o?p.onItemFocus(m):e.preventDefault()}),onFocus:(0,a.M)(e.onFocus,()=>p.onItemFocus(m)),onKeyDown:(0,a.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let n=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return F[n]}(e,p.orientation,p.dir);if(void 0!==t){e.preventDefault();let n=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&n.reverse();let a=n.indexOf(e.currentTarget);n=p.loop?(r=n,s=a+1,r.map((e,t)=>r[(s+t)%r.length])):n.slice(a+1)}setTimeout(()=>z(n))}})})))}),F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}let E=N,B=k}}]);